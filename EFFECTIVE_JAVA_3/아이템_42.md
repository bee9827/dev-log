# 아이템_42.md

> 익명 클래스보다는 람다를 사용하라

아래는 정렬을 익명 클래스를 사용할 때와 람다를 사용할 때를 나타낸 것이다.

```java
public void 익명_클래스() {
    Collections.sort(words, new Comparator<String>() {
        public int comare(String s1, String s2) {
            return Integer.compare(s1.length(), s2.length());
        }
    });
}

public void 람다() {
    Collections.sort(words, 
            (s1, s2) -> Integer.compare(s1.length(), s2.length()));
}
```

여기서 s1,s2 는 타입이 명시 되어 있지 않다. 우리 대신 컴파일러가 문맥을 살펴 타입을 추론해준 것이다.
> 아이템 26,29,30 -> 제네릭 관련 참고


자바 8때 List 인터페이스에 추가된 sort 메서드를 이용하면 더욱 짧아진다.
```java
public void 리스트_정렬() {
    words.sort(comparingInt(String::length));
}
```

람다는 Enum 에서도 응용 할 수 있다.  

아래는 상수별로 다르게 동작하는 코드이다.
- 인스턴스 필드를 이용하는 방식으로 구현

```java
import java.util.function.DoubleBinaryOperator;

public enum Operation {
    PLUS("+") {
        public double apply(double x, double y) {
            return x + y;
        }
    },
    MINUS("-") {
        public double apply(double x, double y) {
            return x - y;
        }
    }, 
    //추가적 코드
    ;

    private final String symbol;
    
    Operation(String symbol){ this.symbol = symbol; }
    
    @Override public String toString(){ return symbol; }
    public abstract double apply(double x, double y);
}
```

람다를 이용하면 아래와 같이 보다 명확하고 간결하게 표현할 수 있다.

```java
import java.util.function.DoubleBinaryOperator;

public enum Operation {
    PLUS("+", (x, y) -> x + y),
    MINUS("-", (x, y) -> x - y),
    //추가적 코드
    ;

    private final String symbol;
    private final DoubleBinaryOperator op;
    
    Operation(String symbol, DoubleBinaryOperator op){
        this.symbol = symbol;
        this.op = op;
    }
    
    @Override public String toString(){ return symbol; }
    public double apply(double x, double y){
        return op.applyAsDouble(x,y);
    }
}
```

하지만 이런 람다는 이름이 없고 문서화가 불가능하다.  
    -> 코드 자체로 동작이 명확히 설명되지 않으면 쓰지 말아야 한다.

이런 람다로 대체할 수 없는 곳이 있다.
- 추상클래스의 인스턴스를 만들때.
- 람다는 자기 자신을 참조할 수 없기 때문에 객체가 자신을 참조해야 한다면 익명 클래스를 써야 한다.
- 직렬화 극히 삼가야 한다.(익명 클래스도 마찬가지) -> 구현 별로(가상 머신별로) 직렬화 형태가 다를 수 있다.
    -> private 정적 중첩 클래스의 인스턴스를 사용하자 (아이템 24)